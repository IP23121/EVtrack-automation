openapi: 3.0.3
info:
  title: EvTrack Automation API
  version: 1.0.0
  description: |
    **EvTrack Automation API**
    
    **Authentication:**
    - All endpoints require an API key passed in the 'X-API-Key' header
    - For Google Apps Script integration, store your API key securely in PropertiesService
    
    **Usage Notes:**
    - For visitor operations: search by name or phone
    - For vehicle operations: either Number Plate OR VIN is required for add
    - For credentials: RFID Card is the default reader type
    - For updates: only fill fields you want to change
    - File uploads: maximum 10MB
servers:
  - url: http://localhost:3000
    description: Local development server
  - url: https://your-production-domain.com
    description: Production deployment (update with your actual domain)
security:
  - ApiKeyAuth: []
components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: API key for authentication. Include this header in all requests.
paths:
  /visitors:
    get:
      summary: Get visitor information
      description: |
        Search for visitors by name or phone to get their complete profile information.
      parameters:
        - name: search
          in: query
          description: Search by name or phone
          required: false
          schema:
            type: string
            example: ""
      responses:
        '200':
          description: Visitor summary retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  visitors:
                    type: array
                    items:
                      type: object
                      properties:
                        uuid:
                          type: string
                        first_name:
                          type: string
                        last_name:
                          type: string
                        mobile:
                          type: string
                        email:
                          type: string
                        company:
                          type: string
    post:
      summary: Create a new visitor
      description: |
        Add a new visitor to the system. First Name, Last Name, and Mobile Number are required.
        File uploads support maximum 10MB.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - first_name
                - last_name
                - mobile
              properties:
                # Personal Information
                initials:
                  type: string
                  maxLength: 10
                first_name:
                  type: string
                last_name:
                  type: string
                id_number:
                  type: string
                first_nations:
                  type: boolean
                disability:
                  type: boolean
                
                # Contact Information
                company:
                  type: string
                country_code:
                  type: string
                  enum:
                    - "Afghanistan +93"
                    - "Albania +355"
                    - "Algeria +213"
                    - "Argentina +54"
                    - "Armenia +374"
                    - "Australia +61"
                    - "Austria +43"
                    - "Azerbaijan +994"
                    - "Bahrain +973"
                    - "Bangladesh +880"
                    - "Belgium +32"
                    - "Brazil +55"
                    - "Bulgaria +359"
                    - "Canada +1"
                    - "Chile +56"
                    - "China +86"
                    - "Colombia +57"
                    - "Croatia +385"
                    - "Cyprus +357"
                    - "Czech Republic +420"
                    - "Denmark +45"
                    - "Egypt +20"
                    - "Estonia +372"
                    - "Finland +358"
                    - "France +33"
                    - "Germany +49"
                    - "Ghana +233"
                    - "Greece +30"
                    - "Hungary +36"
                    - "Iceland +354"
                    - "India +91"
                    - "Indonesia +62"
                    - "Iran +98"
                    - "Iraq +964"
                    - "Ireland +353"
                    - "Israel +972"
                    - "Italy +39"
                    - "Japan +81"
                    - "Jordan +962"
                    - "Kazakhstan +7"
                    - "Kenya +254"
                    - "Kuwait +965"
                    - "Latvia +371"
                    - "Lebanon +961"
                    - "Lithuania +370"
                    - "Luxembourg +352"
                    - "Malaysia +60"
                    - "Malta +356"
                    - "Mexico +52"
                    - "Morocco +212"
                    - "Netherlands +31"
                    - "New Zealand +64"
                    - "Nigeria +234"
                    - "Norway +47"
                    - "Pakistan +92"
                    - "Philippines +63"
                    - "Poland +48"
                    - "Portugal +351"
                    - "Qatar +974"
                    - "Romania +40"
                    - "Russia +7"
                    - "Saudi Arabia +966"
                    - "Singapore +65"
                    - "Slovakia +421"
                    - "Slovenia +386"
                    - "South Africa +27"
                    - "South Korea +82"
                    - "Spain +34"
                    - "Sri Lanka +94"
                    - "Sweden +46"
                    - "Switzerland +41"
                    - "Thailand +66"
                    - "Turkey +90"
                    - "Ukraine +380"
                    - "United Arab Emirates +971"
                    - "United Kingdom +44"
                    - "United States +1"
                    - "Vietnam +84"
                mobile:
                  type: string
                alt_country_code:
                  type: string
                  enum:
                    - "Afghanistan +93"
                    - "Albania +355"
                    - "Algeria +213"
                    - "Argentina +54"
                    - "Armenia +374"
                    - "Australia +61"
                    - "Austria +43"
                    - "Azerbaijan +994"
                    - "Bahrain +973"
                    - "Bangladesh +880"
                    - "Belgium +32"
                    - "Brazil +55"
                    - "Bulgaria +359"
                    - "Canada +1"
                    - "Chile +56"
                    - "China +86"
                    - "Colombia +57"
                    - "Croatia +385"
                    - "Cyprus +357"
                    - "Czech Republic +420"
                    - "Denmark +45"
                    - "Egypt +20"
                    - "Estonia +372"
                    - "Finland +358"
                    - "France +33"
                    - "Germany +49"
                    - "Ghana +233"
                    - "Greece +30"
                    - "Hungary +36"
                    - "Iceland +354"
                    - "India +91"
                    - "Indonesia +62"
                    - "Iran +98"
                    - "Iraq +964"
                    - "Ireland +353"
                    - "Israel +972"
                    - "Italy +39"
                    - "Japan +81"
                    - "Jordan +962"
                    - "Kazakhstan +7"
                    - "Kenya +254"
                    - "Kuwait +965"
                    - "Latvia +371"
                    - "Lebanon +961"
                    - "Lithuania +370"
                    - "Luxembourg +352"
                    - "Malaysia +60"
                    - "Malta +356"
                    - "Mexico +52"
                    - "Morocco +212"
                    - "Netherlands +31"
                    - "New Zealand +64"
                    - "Nigeria +234"
                    - "Norway +47"
                    - "Pakistan +92"
                    - "Philippines +63"
                    - "Poland +48"
                    - "Portugal +351"
                    - "Qatar +974"
                    - "Romania +40"
                    - "Russia +7"
                    - "Saudi Arabia +966"
                    - "Singapore +65"
                    - "Slovakia +421"
                    - "Slovenia +386"
                    - "South Africa +27"
                    - "South Korea +82"
                    - "Spain +34"
                    - "Sri Lanka +94"
                    - "Sweden +46"
                    - "Switzerland +41"
                    - "Thailand +66"
                    - "Turkey +90"
                    - "Ukraine +380"
                    - "United Arab Emirates +971"
                    - "United Kingdom +44"
                    - "United States +1"
                    - "Vietnam +84"
                alt_number:
                  type: string
                email:
                  type: string
                  format: email
                address:
                  type: string
                
                # Additional Details
                date_of_birth:
                  type: string
                  format: date
                  description: "Format: YYYY-MM-DD"
                nationality:
                  type: string
                  enum:
                    - ""
                    - "Afghanistan"
                    - "Åland Islands"
                    - "Albania"
                    - "Algeria"
                    - "American Samoa"
                    - "Andorra"
                    - "Angola"
                    - "Anguilla"
                    - "Antigua & Barbuda"
                    - "Argentina"
                    - "Armenia"
                    - "Aruba"
                    - "Australia"
                    - "Austria"
                    - "Azerbaijan"
                    - "Bahamas"
                    - "Bahrain"
                    - "Bangladesh"
                    - "Barbados"
                    - "Belarus"
                    - "Belgium"
                    - "Belize"
                    - "Benin"
                    - "Bermuda"
                    - "Bhutan"
                    - "Bolivia"
                    - "Bosnia & Herzegovina"
                    - "Botswana"
                    - "Brazil"
                    - "British Virgin Islands"
                    - "Brunei"
                    - "Bulgaria"
                    - "Burkina Faso"
                    - "Burundi"
                    - "Cambodia"
                    - "Cameroon"
                    - "Canada"
                    - "Cape Verde"
                    - "Cayman Islands"
                    - "Central African Republic"
                    - "Chad"
                    - "Chile"
                    - "China"
                    - "Colombia"
                    - "Comoros"
                    - "Congo - Brazzaville"
                    - "Congo - Kinshasa"
                    - "Cook Islands"
                    - "Costa Rica"
                    - "Croatia"
                    - "Cuba"
                    - "Cyprus"
                    - "Czechia"
                    - "Denmark"
                    - "Djibouti"
                    - "Dominica"
                    - "Dominican Republic"
                    - "Ecuador"
                    - "Egypt"
                    - "El Salvador"
                    - "Estonia"
                    - "Ethiopia"
                    - "Fiji"
                    - "Finland"
                    - "France"
                    - "Gabon"
                    - "Gambia"
                    - "Georgia"
                    - "Germany"
                    - "Ghana"
                    - "Gibraltar"
                    - "Greece"
                    - "Greenland"
                    - "Grenada"
                    - "Guam"
                    - "Guatemala"
                    - "Guinea"
                    - "Guinea-Bissau"
                    - "Guyana"
                    - "Haiti"
                    - "Honduras"
                    - "Hong Kong SAR China"
                    - "Hungary"
                    - "Iceland"
                    - "India"
                    - "Indonesia"
                    - "Iran"
                    - "Iraq"
                    - "Ireland"
                    - "Israel"
                    - "Italy"
                    - "Jamaica"
                    - "Japan"
                    - "Jordan"
                    - "Kazakhstan"
                    - "Kenya"
                    - "Kuwait"
                    - "Kyrgyzstan"
                    - "Laos"
                    - "Latvia"
                    - "Lebanon"
                    - "Lesotho"
                    - "Liberia"
                    - "Libya"
                    - "Liechtenstein"
                    - "Lithuania"
                    - "Luxembourg"
                    - "Madagascar"
                    - "Malawi"
                    - "Malaysia"
                    - "Maldives"
                    - "Mali"
                    - "Malta"
                    - "Marshall Islands"
                    - "Mauritania"
                    - "Mauritius"
                    - "Mexico"
                    - "Micronesia"
                    - "Moldova"
                    - "Monaco"
                    - "Mongolia"
                    - "Montenegro"
                    - "Morocco"
                    - "Mozambique"
                    - "Myanmar (Burma)"
                    - "Namibia"
                    - "Nepal"
                    - "Netherlands"
                    - "New Zealand"
                    - "Nicaragua"
                    - "Niger"
                    - "Nigeria"
                    - "North Korea"
                    - "North Macedonia"
                    - "Norway"
                    - "Oman"
                    - "Pakistan"
                    - "Panama"
                    - "Papua New Guinea"
                    - "Paraguay"
                    - "Peru"
                    - "Philippines"
                    - "Poland"
                    - "Portugal"
                    - "Puerto Rico"
                    - "Qatar"
                    - "Romania"
                    - "Russia"
                    - "Rwanda"
                    - "Saudi Arabia"
                    - "Senegal"
                    - "Serbia"
                    - "Seychelles"
                    - "Sierra Leone"
                    - "Singapore"
                    - "Slovakia"
                    - "Slovenia"
                    - "Solomon Islands"
                    - "Somalia"
                    - "South Africa"
                    - "South Korea"
                    - "South Sudan"
                    - "Spain"
                    - "Sri Lanka"
                    - "Sudan"
                    - "Suriname"
                    - "Sweden"
                    - "Switzerland"
                    - "Syria"
                    - "Taiwan"
                    - "Tajikistan"
                    - "Tanzania"
                    - "Thailand"
                    - "Togo"
                    - "Tonga"
                    - "Trinidad & Tobago"
                    - "Tunisia"
                    - "Turkey"
                    - "Turkmenistan"
                    - "Uganda"
                    - "Ukraine"
                    - "United Arab Emirates"
                    - "United Kingdom"
                    - "United States"
                    - "Uruguay"
                    - "Uzbekistan"
                    - "Venezuela"
                    - "Vietnam"
                    - "Yemen"
                    - "Zambia"
                    - "Zimbabwe"
                country_of_issue:
                  type: string
                  enum:
                    - ""
                    - "Afghanistan"
                    - "Åland Islands"
                    - "Albania"
                    - "Algeria"
                    - "American Samoa"
                    - "Andorra"
                    - "Angola"
                    - "Anguilla"
                    - "Antigua & Barbuda"
                    - "Argentina"
                    - "Armenia"
                    - "Aruba"
                    - "Australia"
                    - "Austria"
                    - "Azerbaijan"
                    - "Bahamas"
                    - "Bahrain"
                    - "Bangladesh"
                    - "Barbados"
                    - "Belarus"
                    - "Belgium"
                    - "Belize"
                    - "Benin"
                    - "Bermuda"
                    - "Bhutan"
                    - "Bolivia"
                    - "Bosnia & Herzegovina"
                    - "Botswana"
                    - "Brazil"
                    - "British Virgin Islands"
                    - "Brunei"
                    - "Bulgaria"
                    - "Burkina Faso"
                    - "Burundi"
                    - "Cambodia"
                    - "Cameroon"
                    - "Canada"
                    - "Cape Verde"
                    - "Cayman Islands"
                    - "Central African Republic"
                    - "Chad"
                    - "Chile"
                    - "China"
                    - "Colombia"
                    - "Comoros"
                    - "Congo - Brazzaville"
                    - "Congo - Kinshasa"
                    - "Cook Islands"
                    - "Costa Rica"
                    - "Croatia"
                    - "Cuba"
                    - "Cyprus"
                    - "Czechia"
                    - "Denmark"
                    - "Djibouti"
                    - "Dominica"
                    - "Dominican Republic"
                    - "Ecuador"
                    - "Egypt"
                    - "El Salvador"
                    - "Estonia"
                    - "Ethiopia"
                    - "Fiji"
                    - "Finland"
                    - "France"
                    - "Gabon"
                    - "Gambia"
                    - "Georgia"
                    - "Germany"
                    - "Ghana"
                    - "Gibraltar"
                    - "Greece"
                    - "Greenland"
                    - "Grenada"
                    - "Guam"
                    - "Guatemala"
                    - "Guinea"
                    - "Guinea-Bissau"
                    - "Guyana"
                    - "Haiti"
                    - "Honduras"
                    - "Hong Kong SAR China"
                    - "Hungary"
                    - "Iceland"
                    - "India"
                    - "Indonesia"
                    - "Iran"
                    - "Iraq"
                    - "Ireland"
                    - "Israel"
                    - "Italy"
                    - "Jamaica"
                    - "Japan"
                    - "Jordan"
                    - "Kazakhstan"
                    - "Kenya"
                    - "Kuwait"
                    - "Kyrgyzstan"
                    - "Laos"
                    - "Latvia"
                    - "Lebanon"
                    - "Lesotho"
                    - "Liberia"
                    - "Libya"
                    - "Liechtenstein"
                    - "Lithuania"
                    - "Luxembourg"
                    - "Madagascar"
                    - "Malawi"
                    - "Malaysia"
                    - "Maldives"
                    - "Mali"
                    - "Malta"
                    - "Marshall Islands"
                    - "Mauritania"
                    - "Mauritius"
                    - "Mexico"
                    - "Micronesia"
                    - "Moldova"
                    - "Monaco"
                    - "Mongolia"
                    - "Montenegro"
                    - "Morocco"
                    - "Mozambique"
                    - "Myanmar (Burma)"
                    - "Namibia"
                    - "Nepal"
                    - "Netherlands"
                    - "New Zealand"
                    - "Nicaragua"
                    - "Niger"
                    - "Nigeria"
                    - "North Korea"
                    - "North Macedonia"
                    - "Norway"
                    - "Oman"
                    - "Pakistan"
                    - "Panama"
                    - "Papua New Guinea"
                    - "Paraguay"
                    - "Peru"
                    - "Philippines"
                    - "Poland"
                    - "Portugal"
                    - "Puerto Rico"
                    - "Qatar"
                    - "Romania"
                    - "Russia"
                    - "Rwanda"
                    - "Saudi Arabia"
                    - "Senegal"
                    - "Serbia"
                    - "Seychelles"
                    - "Sierra Leone"
                    - "Singapore"
                    - "Slovakia"
                    - "Slovenia"
                    - "Solomon Islands"
                    - "Somalia"
                    - "South Africa"
                    - "South Korea"
                    - "South Sudan"
                    - "Spain"
                    - "Sri Lanka"
                    - "Sudan"
                    - "Suriname"
                    - "Sweden"
                    - "Switzerland"
                    - "Syria"
                    - "Taiwan"
                    - "Tajikistan"
                    - "Tanzania"
                    - "Thailand"
                    - "Togo"
                    - "Tonga"
                    - "Trinidad & Tobago"
                    - "Tunisia"
                    - "Turkey"
                    - "Turkmenistan"
                    - "Uganda"
                    - "Ukraine"
                    - "United Arab Emirates"
                    - "United Kingdom"
                    - "United States"
                    - "Uruguay"
                    - "Uzbekistan"
                    - "Venezuela"
                    - "Vietnam"
                    - "Yemen"
                    - "Zambia"
                    - "Zimbabwe"
                comments:
                  type: string
                reason_for_visit:
                  type: string
                  enum:
                    - ""
                    - "Delivery"
                    - "Guest House Visitor"
                    - "Parent Pickup/Dropoff"
                    - "Staff"
                    - "Tour"
                    - "Visitor"
                
                # Documents & Media
                photo:
                  type: string
                  format: binary
                  description: "Photo upload - Maximum 10MB"
                signature:
                  type: string
                  format: binary
                  description: "Signature upload - Maximum 10MB"
                id_document:
                  type: string
                  format: binary
                  description: "ID document upload - Maximum 10MB"
      responses:
        '201':
          description: Visitor created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  visitor_id:
                    type: string
                  message:
                    type: string
  /visitors/update:
    post:
      summary: Update an existing visitor profile
      description: |
        Search for the visitor first, then only fill in the fields you want to change.
        Empty fields will be ignored and keep their current values.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - search_term
              properties:
                # Search Term (Required)
                search_term:
                  type: string
                
                # Personal Information (All Optional)
                initials:
                  type: string
                  maxLength: 10
                first_name:
                  type: string
                last_name:
                  type: string
                id_number:
                  type: string
                first_nations:
                  type: boolean
                disability:
                  type: boolean
                
                # Contact Information
                company:
                  type: string
                country_code:
                  type: string
                  enum:
                    - "Afghanistan +93"
                    - "Albania +355"
                    - "Algeria +213"
                    - "Argentina +54"
                    - "Armenia +374"
                    - "Australia +61"
                    - "Austria +43"
                    - "Azerbaijan +994"
                    - "Bahrain +973"
                    - "Bangladesh +880"
                    - "Belgium +32"
                    - "Brazil +55"
                    - "Bulgaria +359"
                    - "Canada +1"
                    - "Chile +56"
                    - "China +86"
                    - "Colombia +57"
                    - "Croatia +385"
                    - "Cyprus +357"
                    - "Czech Republic +420"
                    - "Denmark +45"
                    - "Egypt +20"
                    - "Estonia +372"
                    - "Finland +358"
                    - "France +33"
                    - "Germany +49"
                    - "Ghana +233"
                    - "Greece +30"
                    - "Hungary +36"
                    - "Iceland +354"
                    - "India +91"
                    - "Indonesia +62"
                    - "Iran +98"
                    - "Iraq +964"
                    - "Ireland +353"
                    - "Israel +972"
                    - "Italy +39"
                    - "Japan +81"
                    - "Jordan +962"
                    - "Kazakhstan +7"
                    - "Kenya +254"
                    - "Kuwait +965"
                    - "Latvia +371"
                    - "Lebanon +961"
                    - "Lithuania +370"
                    - "Luxembourg +352"
                    - "Malaysia +60"
                    - "Malta +356"
                    - "Mexico +52"
                    - "Morocco +212"
                    - "Netherlands +31"
                    - "New Zealand +64"
                    - "Nigeria +234"
                    - "Norway +47"
                    - "Pakistan +92"
                    - "Philippines +63"
                    - "Poland +48"
                    - "Portugal +351"
                    - "Qatar +974"
                    - "Romania +40"
                    - "Russia +7"
                    - "Saudi Arabia +966"
                    - "Singapore +65"
                    - "Slovakia +421"
                    - "Slovenia +386"
                    - "South Africa +27"
                    - "South Korea +82"
                    - "Spain +34"
                    - "Sri Lanka +94"
                    - "Sweden +46"
                    - "Switzerland +41"
                    - "Thailand +66"
                    - "Turkey +90"
                    - "Ukraine +380"
                    - "United Arab Emirates +971"
                    - "United Kingdom +44"
                    - "United States +1"
                    - "Vietnam +84"
                mobile:
                  type: string
                alt_country_code:
                  type: string
                  enum:
                    - "Afghanistan +93"
                    - "Albania +355"
                    - "Algeria +213"
                    - "Argentina +54"
                    - "Armenia +374"
                    - "Australia +61"
                    - "Austria +43"
                    - "Azerbaijan +994"
                    - "Bahrain +973"
                    - "Bangladesh +880"
                    - "Belgium +32"
                    - "Brazil +55"
                    - "Bulgaria +359"
                    - "Canada +1"
                    - "Chile +56"
                    - "China +86"
                    - "Colombia +57"
                    - "Croatia +385"
                    - "Cyprus +357"
                    - "Czech Republic +420"
                    - "Denmark +45"
                    - "Egypt +20"
                    - "Estonia +372"
                    - "Finland +358"
                    - "France +33"
                    - "Germany +49"
                    - "Ghana +233"
                    - "Greece +30"
                    - "Hungary +36"
                    - "Iceland +354"
                    - "India +91"
                    - "Indonesia +62"
                    - "Iran +98"
                    - "Iraq +964"
                    - "Ireland +353"
                    - "Israel +972"
                    - "Italy +39"
                    - "Japan +81"
                    - "Jordan +962"
                    - "Kazakhstan +7"
                    - "Kenya +254"
                    - "Kuwait +965"
                    - "Latvia +371"
                    - "Lebanon +961"
                    - "Lithuania +370"
                    - "Luxembourg +352"
                    - "Malaysia +60"
                    - "Malta +356"
                    - "Mexico +52"
                    - "Morocco +212"
                    - "Netherlands +31"
                    - "New Zealand +64"
                    - "Nigeria +234"
                    - "Norway +47"
                    - "Pakistan +92"
                    - "Philippines +63"
                    - "Poland +48"
                    - "Portugal +351"
                    - "Qatar +974"
                    - "Romania +40"
                    - "Russia +7"
                    - "Saudi Arabia +966"
                    - "Singapore +65"
                    - "Slovakia +421"
                    - "Slovenia +386"
                    - "South Africa +27"
                    - "South Korea +82"
                    - "Spain +34"
                    - "Sri Lanka +94"
                    - "Sweden +46"
                    - "Switzerland +41"
                    - "Thailand +66"
                    - "Turkey +90"
                    - "Ukraine +380"
                    - "United Arab Emirates +971"
                    - "United Kingdom +44"
                    - "United States +1"
                    - "Vietnam +84"
                alt_number:
                  type: string
                email:
                  type: string
                  format: email
                address:
                  type: string
                
                # Additional Details
                date_of_birth:
                  type: string
                  format: date
                  description: "Format: YYYY-MM-DD"
                gender:
                  type: string
                  enum:
                    - ""
                    - "Male"
                    - "Female"
                    - "Other"
                nationality:
                  type: string
                  enum:
                    - ""
                    - "Afghanistan"
                    - "Åland Islands"
                    - "Albania"
                    - "Algeria"
                    - "American Samoa"
                    - "Andorra"
                    - "Angola"
                    - "Anguilla"
                    - "Antigua & Barbuda"
                    - "Argentina"
                    - "Armenia"
                    - "Aruba"
                    - "Australia"
                    - "Austria"
                    - "Azerbaijan"
                    - "Bahamas"
                    - "Bahrain"
                    - "Bangladesh"
                    - "Barbados"
                    - "Belarus"
                    - "Belgium"
                    - "Belize"
                    - "Benin"
                    - "Bermuda"
                    - "Bhutan"
                    - "Bolivia"
                    - "Bosnia & Herzegovina"
                    - "Botswana"
                    - "Brazil"
                    - "British Virgin Islands"
                    - "Brunei"
                    - "Bulgaria"
                    - "Burkina Faso"
                    - "Burundi"
                    - "Cambodia"
                    - "Cameroon"
                    - "Canada"
                    - "Cape Verde"
                    - "Cayman Islands"
                    - "Central African Republic"
                    - "Chad"
                    - "Chile"
                    - "China"
                    - "Colombia"
                    - "Comoros"
                    - "Congo - Brazzaville"
                    - "Congo - Kinshasa"
                    - "Cook Islands"
                    - "Costa Rica"
                    - "Croatia"
                    - "Cuba"
                    - "Cyprus"
                    - "Czechia"
                    - "Denmark"
                    - "Djibouti"
                    - "Dominica"
                    - "Dominican Republic"
                    - "Ecuador"
                    - "Egypt"
                    - "El Salvador"
                    - "Estonia"
                    - "Ethiopia"
                    - "Fiji"
                    - "Finland"
                    - "France"
                    - "Gabon"
                    - "Gambia"
                    - "Georgia"
                    - "Germany"
                    - "Ghana"
                    - "Gibraltar"
                    - "Greece"
                    - "Greenland"
                    - "Grenada"
                    - "Guam"
                    - "Guatemala"
                    - "Guinea"
                    - "Guinea-Bissau"
                    - "Guyana"
                    - "Haiti"
                    - "Honduras"
                    - "Hong Kong SAR China"
                    - "Hungary"
                    - "Iceland"
                    - "India"
                    - "Indonesia"
                    - "Iran"
                    - "Iraq"
                    - "Ireland"
                    - "Israel"
                    - "Italy"
                    - "Jamaica"
                    - "Japan"
                    - "Jordan"
                    - "Kazakhstan"
                    - "Kenya"
                    - "Kuwait"
                    - "Kyrgyzstan"
                    - "Laos"
                    - "Latvia"
                    - "Lebanon"
                    - "Lesotho"
                    - "Liberia"
                    - "Libya"
                    - "Liechtenstein"
                    - "Lithuania"
                    - "Luxembourg"
                    - "Madagascar"
                    - "Malawi"
                    - "Malaysia"
                    - "Maldives"
                    - "Mali"
                    - "Malta"
                    - "Marshall Islands"
                    - "Mauritania"
                    - "Mauritius"
                    - "Mexico"
                    - "Micronesia"
                    - "Moldova"
                    - "Monaco"
                    - "Mongolia"
                    - "Montenegro"
                    - "Morocco"
                    - "Mozambique"
                    - "Myanmar (Burma)"
                    - "Namibia"
                    - "Nepal"
                    - "Netherlands"
                    - "New Zealand"
                    - "Nicaragua"
                    - "Niger"
                    - "Nigeria"
                    - "North Korea"
                    - "North Macedonia"
                    - "Norway"
                    - "Oman"
                    - "Pakistan"
                    - "Panama"
                    - "Papua New Guinea"
                    - "Paraguay"
                    - "Peru"
                    - "Philippines"
                    - "Poland"
                    - "Portugal"
                    - "Puerto Rico"
                    - "Qatar"
                    - "Romania"
                    - "Russia"
                    - "Rwanda"
                    - "Saudi Arabia"
                    - "Senegal"
                    - "Serbia"
                    - "Seychelles"
                    - "Sierra Leone"
                    - "Singapore"
                    - "Slovakia"
                    - "Slovenia"
                    - "Solomon Islands"
                    - "Somalia"
                    - "South Africa"
                    - "South Korea"
                    - "South Sudan"
                    - "Spain"
                    - "Sri Lanka"
                    - "Sudan"
                    - "Suriname"
                    - "Sweden"
                    - "Switzerland"
                    - "Syria"
                    - "Taiwan"
                    - "Tajikistan"
                    - "Tanzania"
                    - "Thailand"
                    - "Togo"
                    - "Tonga"
                    - "Trinidad & Tobago"
                    - "Tunisia"
                    - "Turkey"
                    - "Turkmenistan"
                    - "Uganda"
                    - "Ukraine"
                    - "United Arab Emirates"
                    - "United Kingdom"
                    - "United States"
                    - "Uruguay"
                    - "Uzbekistan"
                    - "Venezuela"
                    - "Vietnam"
                    - "Yemen"
                    - "Zambia"
                    - "Zimbabwe"
                country_of_issue:
                  type: string
                  enum:
                    - ""
                    - "Afghanistan"
                    - "Åland Islands"
                    - "Albania"
                    - "Algeria"
                    - "American Samoa"
                    - "Andorra"
                    - "Angola"
                    - "Anguilla"
                    - "Antigua & Barbuda"
                    - "Argentina"
                    - "Armenia"
                    - "Aruba"
                    - "Australia"
                    - "Austria"
                    - "Azerbaijan"
                    - "Bahamas"
                    - "Bahrain"
                    - "Bangladesh"
                    - "Barbados"
                    - "Belarus"
                    - "Belgium"
                    - "Belize"
                    - "Benin"
                    - "Bermuda"
                    - "Bhutan"
                    - "Bolivia"
                    - "Bosnia & Herzegovina"
                    - "Botswana"
                    - "Brazil"
                    - "British Virgin Islands"
                    - "Brunei"
                    - "Bulgaria"
                    - "Burkina Faso"
                    - "Burundi"
                    - "Cambodia"
                    - "Cameroon"
                    - "Canada"
                    - "Cape Verde"
                    - "Cayman Islands"
                    - "Central African Republic"
                    - "Chad"
                    - "Chile"
                    - "China"
                    - "Colombia"
                    - "Comoros"
                    - "Congo - Brazzaville"
                    - "Congo - Kinshasa"
                    - "Cook Islands"
                    - "Costa Rica"
                    - "Croatia"
                    - "Cuba"
                    - "Cyprus"
                    - "Czechia"
                    - "Denmark"
                    - "Djibouti"
                    - "Dominica"
                    - "Dominican Republic"
                    - "Ecuador"
                    - "Egypt"
                    - "El Salvador"
                    - "Estonia"
                    - "Ethiopia"
                    - "Fiji"
                    - "Finland"
                    - "France"
                    - "Gabon"
                    - "Gambia"
                    - "Georgia"
                    - "Germany"
                    - "Ghana"
                    - "Gibraltar"
                    - "Greece"
                    - "Greenland"
                    - "Grenada"
                    - "Guam"
                    - "Guatemala"
                    - "Guinea"
                    - "Guinea-Bissau"
                    - "Guyana"
                    - "Haiti"
                    - "Honduras"
                    - "Hong Kong SAR China"
                    - "Hungary"
                    - "Iceland"
                    - "India"
                    - "Indonesia"
                    - "Iran"
                    - "Iraq"
                    - "Ireland"
                    - "Israel"
                    - "Italy"
                    - "Jamaica"
                    - "Japan"
                    - "Jordan"
                    - "Kazakhstan"
                    - "Kenya"
                    - "Kuwait"
                    - "Kyrgyzstan"
                    - "Laos"
                    - "Latvia"
                    - "Lebanon"
                    - "Lesotho"
                    - "Liberia"
                    - "Libya"
                    - "Liechtenstein"
                    - "Lithuania"
                    - "Luxembourg"
                    - "Madagascar"
                    - "Malawi"
                    - "Malaysia"
                    - "Maldives"
                    - "Mali"
                    - "Malta"
                    - "Marshall Islands"
                    - "Mauritania"
                    - "Mauritius"
                    - "Mexico"
                    - "Micronesia"
                    - "Moldova"
                    - "Monaco"
                    - "Mongolia"
                    - "Montenegro"
                    - "Morocco"
                    - "Mozambique"
                    - "Myanmar (Burma)"
                    - "Namibia"
                    - "Nepal"
                    - "Netherlands"
                    - "New Zealand"
                    - "Nicaragua"
                    - "Niger"
                    - "Nigeria"
                    - "North Korea"
                    - "North Macedonia"
                    - "Norway"
                    - "Oman"
                    - "Pakistan"
                    - "Panama"
                    - "Papua New Guinea"
                    - "Paraguay"
                    - "Peru"
                    - "Philippines"
                    - "Poland"
                    - "Portugal"
                    - "Puerto Rico"
                    - "Qatar"
                    - "Romania"
                    - "Russia"
                    - "Rwanda"
                    - "Saudi Arabia"
                    - "Senegal"
                    - "Serbia"
                    - "Seychelles"
                    - "Sierra Leone"
                    - "Singapore"
                    - "Slovakia"
                    - "Slovenia"
                    - "Solomon Islands"
                    - "Somalia"
                    - "South Africa"
                    - "South Korea"
                    - "South Sudan"
                    - "Spain"
                    - "Sri Lanka"
                    - "Sudan"
                    - "Suriname"
                    - "Sweden"
                    - "Switzerland"
                    - "Syria"
                    - "Taiwan"
                    - "Tajikistan"
                    - "Tanzania"
                    - "Thailand"
                    - "Togo"
                    - "Tonga"
                    - "Trinidad & Tobago"
                    - "Tunisia"
                    - "Turkey"
                    - "Turkmenistan"
                    - "Uganda"
                    - "Ukraine"
                    - "United Arab Emirates"
                    - "United Kingdom"
                    - "United States"
                    - "Uruguay"
                    - "Uzbekistan"
                    - "Venezuela"
                    - "Vietnam"
                    - "Yemen"
                    - "Zambia"
                    - "Zimbabwe"
                comments:
                  type: string
                reason_for_visit:
                  type: string
                  enum:
                    - ""
                    - "Delivery"
                    - "Guest House Visitor" 
                    - "Parent Pickup/Dropoff"
                    - "Staff"
                    - "Tour"
                    - "Visitor"
                
                # Documents & Media
                photo:
                  type: string
                  format: binary
                  description: "Photo upload - Maximum 10MB"
                signature:
                  type: string
                  format: binary
                  description: "Signature upload - Maximum 10MB"
                id_document:
                  type: string
                  format: binary
                  description: "ID document upload - Maximum 10MB"
      responses:
        '200':
          description: Visitor updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  updated_fields:
                    type: array
                    items:
                      type: string
                  visitor_name:
                    type: string
                  uuid:
                    type: string
  /visitors/invite:
    post:
      summary: Invite a visitor
      description: |
        Search for the visitor by name, phone, or email first. Fill in the invitation details form.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - search_term
                - locationId
              properties:
                search_term:
                  type: string
                  title: "Search Visitor"
                  description: "Search for visitor by name, phone, or email"
                credentialReaderType:
                  type: string
                  title: "Type"
                  enum:
                    - "PIN_MVL_ID"
                    - "PIN_ID_LPR"
                    - "PIN_MVL"
                    - "PIN_ID"
                    - "PIN_MVL_LPR"
                    - "PIN_LPR"
                    - "QR_CODE"
                    - "PIN"
                    - "PIN_MVL_ID_LPR"
                  default: "QR_CODE"
                  description: "QR Code (Email/SMS) is selected by default"
                visitReasonId:
                  type: string
                  title: "Reason for visit"
                  enum:
                    - "None"
                    - "Visitor"
                    - "Delivery"
                    - "Guest House Visitor"
                    - "Parent Pickup/Dropoff"
                    - "Staff"
                    - "Tour"
                  default: "Parent Pickup/Dropoff"
                locationId:
                  type: string
                  title: "Location"
                  enum:
                    - "Select Location..."
                    - "Inherited - Default Visitor Access List"
                    - "IO Main Campus"
                  description: "Location is required - select from available options"
                activateDate:
                  type: string
                  format: date
                  title: "From Date"
                  description: "Format: YYYY-MM-DD"
                activateTime:
                  type: string
                  title: "From Time"
                  description: "Format: HH:MM (24-hour format) - Must be HH:MM format"
                  pattern: "^([01]?[0-9]|2[0-3]):[0-5][0-9]$"
                  minLength: 5
                  maxLength: 5
                expiryDate:
                  type: string
                  format: date
                  title: "To Date"
                  description: "Format: YYYY-MM-DD"
                expiryTime:
                  type: string
                  title: "To Time"
                  description: "Format: HH:MM (24-hour format) - Must be HH:MM format"
                  pattern: "^([01]?[0-9]|2[0-3]):[0-5][0-9]$"
                  minLength: 5
                  maxLength: 5
                visitorUuid:
                  type: string
                  title: "Visitor UUID"
                  description: "Hidden field - automatically filled by system"
                  readOnly: true
      responses:
        '200':
          description: Visitor invited successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  visitor_uuid:
                    type: string
                  visitor_name:
                    type: string
                  invite_settings:
                    type: object
  /visitors/badge:
    post:
      summary: Generate a visitor badge
      description: |
        Search for the visitor by name, phone, or email. Badge file will be downloaded.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - search
              properties:
                search:
                  type: string
                  title: "Search Visitor"
                  description: "Search for visitor by name, phone, or email"
      responses:
        '200':
          description: Badge file generated and downloaded successfully
          content:
            application/pdf:
              schema:
                type: string
                format: binary
                description: "Visitor badge as PDF file"
            application/octet-stream:
              schema:
                type: string
                format: binary
                description: "Visitor badge file (fallback content type)"
          headers:
            Content-Disposition:
              description: "Attachment with filename for download"
              schema:
                type: string
                example: "attachment; filename=badge_John_Doe_12345678.pdf"
            Content-Length:
              description: "Size of the badge file in bytes"
              schema:
                type: integer
        '400':
          description: Invalid input data or visitor not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string
                    example: "Search term is required to find the visitor"
  /vehicles/add:
    post:
      operationId: add_vehicle
      summary: Add a vehicle to a visitor
      description: |
        Search for the visitor by name, phone, or email first. 
        Either Number Plate OR VIN is required - all other fields are optional.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - search_term
              properties:
                search_term:
                  type: string
                  description: "Search for visitor by name, phone, or email..."
                number_plate:
                  type: string
                  description: "e.g., ABC-123"
                vin:
                  type: string
                  description: "Vehicle Identification Number"
                vehicle_type:
                  type: string
                  description: "e.g., Car, Truck, Motorcycle"
                make:
                  type: string
                  description: "e.g., Toyota, Ford, BMW"
                model:
                  type: string
                  description: "e.g., Camry, F-150, X3"
                year:
                  type: integer
                  minimum: 1900
                  maximum: 2030
                  description: "Vehicle year (e.g., 2020)"
                colour:
                  type: string
                  description: "e.g., Red, Blue, Black"
                engine_number:
                  type: string
                  description: "Engine identification number"
                licence_disc_number:
                  type: string
                  description: "License disc number"
                licence_expiry_date:
                  type: string
                  format: date
                  description: "Format: YYYY-MM-DD"
                document_number:
                  type: string
                  description: "Document reference number"
                comments:
                  type: string
                  description: "Additional comments about the vehicle"
      responses:
        '201':
          description: Vehicle added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  search_term:
                    type: string
                  vehicle_data:
                    type: object
                  visitor_name:
                    type: string
                  visitor_uuid:
                    type: string
  /vehicles/update:
    post:
      summary: Update a visitor's vehicle
      description: |
        Search for a vehicle by license plate, VIN, make, or model.
        Only fill in the fields you want to update - blank fields will remain unchanged.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - search_term
              properties:
                search_term:
                  type: string
                  description: "Search by license plate, VIN, make, or model..."
                number_plate:
                  type: string
                  description: "e.g., ABC-123"
                vin:
                  type: string
                  description: "Vehicle Identification Number"
                vehicle_type:
                  type: string
                  description: "e.g., Car, Truck, Motorcycle"
                make:
                  type: string
                  description: "e.g., Toyota, Ford, BMW"
                model:
                  type: string
                  description: "e.g., Camry, F-150, X3"
                year:
                  type: integer
                  minimum: 1900
                  maximum: 2030
                  description: "Vehicle year (e.g., 2020)"
                colour:
                  type: string
                  description: "e.g., Red, Blue, Black"
                engine_number:
                  type: string
                  description: "Engine identification number"
                licence_disc_number:
                  type: string
                  description: "License disc number"
                licence_expiry_date:
                  type: string
                  format: date
                  description: "Format: YYYY-MM-DD"
                document_number:
                  type: string
                  description: "Document reference number"
                comments:
                  type: string
                  description: "Additional comments about the vehicle"
      responses:
        '200':
          description: Vehicle updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  search_term:
                    type: string
                  vehicle_data:
                    type: object
                  updated_fields:
                    type: array
                    items:
                      type: string
  /credentials/add:
    post:
      summary: Add a credential to a visitor
      description: |
        Search for a visitor first, then add credentials to their profile.
        Select the appropriate Reader Type and fill in the required fields.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - search_term
                - unique_identifier
              properties:
                search_term:
                  type: string
                  description: "Search for visitor by name, phone, or email..."
                reader_type:
                  type: string
                  title: "Reader Type"
                  description: "Select reader type (CONTACTLESS_CARD = RFID Card)"
                  enum:
                    - ""
                    - "CONTACTLESS_CARD"
                    - "PIN"
                    - "LPR"
                    - "MVL"
                    - "DRIVER_LICENCE_CARD"
                    - "IDENTITY"
                    - "MVL_ID"
                    - "LPR_MVL_ID"
                    - "PIN_LPR"
                    - "PIN_ID"
                    - "PIN_MVL"
                    - "PIN_MVL_ID"
                    - "PIN_ID_LPR"
                    - "PIN_MVL_LPR"
                    - "PIN_MVL_ID_LPR"
                    - "QR_CODE"
                    - "MOBILE"
                    - "FACE"
                    - "WATCHLIST_THREAT"
                  default: "CONTACTLESS_CARD"
                unique_identifier:
                  type: string
                  description: "Unique identifier"
                pin:
                  type: string
                  description: "Enter PIN"
                use_limit:
                  type: integer
                  description: "Use limit (e.g., 10)"
                active_date:
                  type: string
                  format: date
                  title: "Active Date"
                  description: "Format: YYYY-MM-DD"
                active_time:
                  type: string
                  format: time
                  title: "Active Time"
                  description: "Select time (24-hour format) - Must be HH:MM format"
                  pattern: "^([01]?[0-9]|2[0-3]):[0-5][0-9]$"
                  minLength: 5
                  maxLength: 5
                expiry_date:
                  type: string
                  format: date
                  title: "Expiry Date"
                  description: "Format: YYYY-MM-DD"
                expiry_time:
                  type: string
                  format: time
                  title: "Expiry Time"
                  description: "Select time (24-hour format) - Must be HH:MM format"
                  pattern: "^([01]?[0-9]|2[0-3]):[0-5][0-9]$"
                  minLength: 5
                  maxLength: 5
                status:
                  type: string
                  enum:
                    - "ACTIVE"
                    - "EXPIRED"
                    - "DELETED"
                    - "DESTROYED"
                    - "LOST"
                    - "STOLEN"
                    - "VALID"
                    - "DISABLED"
                  default: "ACTIVE"
                comments:
                  type: string
                  description: "Additional comments"
                access_control_lists:
                  type: boolean
                  default: true
      responses:
        '201':
          description: Credential added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  message:
                    type: string
                  visitor_uuid:
                    type: string
                  credential_data:
                    type: object
  /credentials/update:
    post:
      summary: Update a visitor's credential
      description: |
        Search for a visitor first, then provide a credential search detail.
        Only fill in the fields you want to change - empty fields will remain unchanged.
        Note: Holder, Credential Type, Reader Type, Card#/LPR/UID, and PIN cannot be edited.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - search_term
                - credential_search_detail
              properties:
                search_term:
                  type: string
                  description: "Search for visitor by name, phone, or email..."
                credential_search_detail:
                  type: string
                  description: "Enter any credential detail (Card#, UID, comments, etc.)"
                use_limit:
                  type: integer
                  description: "New use limit (leave empty to keep current)"
                status:
                  type: string
                  enum:
                    - ""
                    - "ACTIVE"
                    - "EXPIRED"
                    - "DELETED"
                    - "DESTROYED"
                    - "LOST"
                    - "STOLEN"
                    - "VALID"
                    - "DISABLED"
                active_date:
                  type: string
                  format: date
                  title: "Active Date"
                  description: "Format: YYYY-MM-DD (leave empty to keep current)"
                active_time:
                  type: string
                  format: time
                  title: "Active Time"
                  description: "Select time (24-hour format) - Leave empty to keep current - Must be HH:MM format"
                  pattern: "^([01]?[0-9]|2[0-3]):[0-5][0-9]$"
                  minLength: 5
                  maxLength: 5
                expiry_date:
                  type: string
                  format: date
                  title: "Expiry Date"
                  description: "Format: YYYY-MM-DD (leave empty to keep current)"
                expiry_time:
                  type: string
                  format: time
                  title: "Expiry Time"
                  description: "Select time (24-hour format) - Leave empty to keep current - Must be HH:MM format"
                  pattern: "^([01]?[0-9]|2[0-3]):[0-5][0-9]$"
                  minLength: 5
                  maxLength: 5
                comments:
                  type: string
                  description: "New comments (leave empty to keep current)"
      responses:
        '200':
          description: Credential updated successfully
          content:
            application/json:
        '401':
          description: Unauthorized - Invalid or missing API key
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Invalid API key"
                  message:
                    type: string
                    example: "Please provide a valid X-API-Key header"
        '403':
          description: Forbidden - API key does not have required permissions
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Insufficient permissions"
